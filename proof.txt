Script:


#!/bin/sh


commandslist="sudo apt update,sudo apt upgrade -y,sudo apt autoremove"
mirrors="git://git.kernel.org/pub/scm/linux/kernel/git/torvalds/linux.git,git://git.kernel.org/pub/scm/linux/kernel/git/stable/linux.git"
i=1
ubuntupdate()
{
echo "$commandslist" | tr ',' '\n' | while read i;
	 do
		$(echo $i);
	done
echo "Ubuntu updated successfuly!"
}

networkcheck()
{
ping google.com -c1 >> log.txt;
errorcode=$(echo $?)
}

mirrorsupdate()
{
echo "$mirrors" | tr ',' '\n' | while read i;
	 do
		sudo git pull $i &
	done
echo "Mirrors updated!"
}

networkcheck

if test $errorcode -eq 2
then
	while [ "$i" -le 5 ] # 5 attempts
		do
			echo "No internet connectin"
			sleep 20; #20 seconds delay
			networkcheck
				if test $errorcode -eq 0 # rechecking connection
				then
					echo "Internet available again"
					ubuntupdate
					break;
				fi
			i=$((i+1))
		done
echo "Update failed, check network connection!"
fi


if test $errorcode -eq 0
then
	ubuntupdate #updates ubuntu
	mirrorsupdate #updates mirrors
fi




#!/bin/dash


commandslist="sudo apt update,sudo apt upgrade -y,sudo apt autoremove"
mirrors="git://git.kernel.org/pub/scm/linux/kernel/git/torvalds/linux.git,git://git.kernel.org/pub/scm/linux/kernel/git/stable/linux.git"
i=1
ubuntupdate()
{
echo "$commandslist" | tr ',' '\n' | while read i; do
`echo $i`;
done
echo "Ubuntu updated successfuly!"
}

networkcheck()
{
ping google.com -c1 >> log.txt;
errorcode=`echo $?`
}

mirrorsupdate()
{
echo "$mirrors" | tr ',' '\n' | while read i; do
sudo git pull $i &
done
echo "Mirrors updated!"
}

networkcheck


if test $errorcode -eq 2
then
	while [ "$i" -le 5 ] # 5 attempts
	do
	echo "No internet connectin"
	sleep 20; #20 seconds delay
	networkcheck
	if test $errorcode -eq 0 # rechecking connection
	then
	echo "Internet available again"
	ubuntupdate
	break;
	fi
	i=$((i+1))
	done
echo "Update failed, check network connection!"
fi


if test $errorcode -eq 0
then
ubuntupdate #updates ubuntu
mirrorsupdate #updates mirrors
fi





Checks for connections: 
--- google.com ping statistics ---
1 packets transmitted, 1 received, 0% packet loss, time 0ms
rtt min/avg/max/mdev = 24.443/24.443/24.443/0.000 ms
PING google.com (142.250.187.110) 56(84) bytes of data.
64 bytes from sof02s44-in-f14.1e100.net (142.250.187.110): icmp_seq=1 ttl=112 time=24.4 ms


Updates: 

corin@otp-cdobrica-l1:~/Desktop/Task2$ ./myupdater.sh 
Hit:1 http://mirrors.nav.ro/ubuntu jammy InRelease
Hit:2 http://mirrors.nav.ro/ubuntu jammy-updates InRelease
Hit:3 http://mirrors.nav.ro/ubuntu jammy-backports InRelease                     
Hit:4 http://mirrors.nav.ro/ubuntu jammy-security InRelease                      
Hit:5 http://packages.microsoft.com/repos/code stable InRelease
Reading package lists... Done
Building dependency tree... Done
Reading state information... Done
All packages are up to date.
Reading package lists... Done
Building dependency tree... Done
Reading state information... Done
Calculating upgrade... Done
0 upgraded, 0 newly installed, 0 to remove and 0 not upgraded.
Reading package lists... Done
Building dependency tree... Done
Reading state information... Done
0 upgraded, 0 newly installed, 0 to remove and 0 not upgraded.
Ubuntu updated successfuly!
From git://git.kernel.org/pub/scm/linux/kernel/git/torvalds/linux
 * branch                      HEAD       -> FETCH_HEAD
Already up to date.
From git://git.kernel.org/pub/scm/linux/kernel/git/stable/linux
 * branch                      HEAD       -> FETCH_HEAD
Already up to date.
Mirrors updated!


crontab schedule:
00 01 * * * /home/corin/Desktop/Task2/myupdater.sh

